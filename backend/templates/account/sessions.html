<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Session management</title>
</head>
<body>
    <h1>My session</h1>
    <p>The one with "(current)" is the session you are currently using.</p>

    <table border="1" cellpadding="6">
        <tr><th>Session Key</th><th>Expiration time</th><th>Operate</th></tr>
        {% for s in sessions %}
            <tr>
                <td>{{ s.key }} {% if s.is_current %}(Current){% endif %}</td>
                <td>{{ s.expires|date:"Y-m-d H:i" }}</td>
                <td>
                    {% if not s.is_current %}
                        <form method="post" style="display: inline">
                            {% csrf_token %}
                            <input type="hidden" name="action" value="kill_one">
                            <input type="hidden" name="key" value="{{ s.key }}">
                            <button type="submit">Exit this device</button>
                        </form>
                    {% else %}-{% endif %}
                </td>
            </tr>
        {% empty %}
            <tr><td colspan="3">No sessions temporarily</td></tr>
        {% endfor %}
    </table>

    <div style="margin-top: 12px;">
        <form method="post" style="display:inline">
            {% csrf_token %}
            <input type="hidden" name="action" value="kill_others">
            <button type="submit">Exit other devices</button>
        </form>

        <form method="post" style="display: inline; margin-left: 8px;">
            {% csrf_token %}
            <input type="hidden" name="action" value="kill_all">
            <button type="submit">Exit all devices and log out</button>
        </form>
    </div>

    <p style="margin-top: 12px;"><a href="{% url 'me' %}">Return to my account</a></p>
</body>
</html>